# 設計案: <タイトル>

## 概要
<設計対象について2-3文で説明>

例：
本ドキュメントでは、ユーザー認証機能の複数の設計アプローチを評価します。OAuth2.0、セッションベース、SaaS型認証の各手法を比較し、セキュリティとスケーラビリティの要件を満たす最適な実装方法を選定します。

---

## 設計案1: <設計案の名前>

**概要**
<この設計案について2-3文で説明>

**アーキテクチャ**
```
<主要コンポーネントとデータフローを示すシンプルな図>
例：
クライアント → APIゲートウェイ → 認証サービス → トークン検証
                         ↓
                    ユーザーDB
```

**アーキテクチャ適合性とベストプラクティス**
- <既存アーキテクチャのレイヤー/モジュールをどのように尊重するか>
- <依存関係をどこで反転／抽象化する必要があるか>
- <逸脱がある場合のフォローアップや移行計画>

**ドメインロジック配置**
- <コアビジネスロジックをどこに集約するか>
- <ドメイン層をインフラ依存からどのように切り離すか>
- <集約や境界づけられたコンテキストへの影響>

**利点**
- ✅ 利点1: <具体的な利点>
- ✅ 利点2: <具体的な利点>
- ✅ 利点3: <具体的な利点>
- ✅ 利点4: <具体的な利点>（オプション）
- ✅ 利点5: <具体的な利点>（オプション）

**欠点**
- ❌ 欠点1: <具体的な制約や課題>
- ❌ 欠点2: <具体的な制約や課題>
- ❌ 欠点3: <具体的な制約や課題>
- ❌ 欠点4: <具体的な制約や課題>（オプション）
- ❌ 欠点5: <具体的な制約や課題>（オプション）

**実装複雑度**: 低 / 中 / 高

**主要リスク**
<主な技術的リスクを1-2文で説明>

---

## 設計案2: <設計案の名前>

**概要**
<この設計案について2-3文で説明>

**アーキテクチャ**
```
<主要コンポーネントとデータフローを示すシンプルな図>
```

**アーキテクチャ適合性とベストプラクティス**
- <既存アーキテクチャのレイヤー/モジュールをどのように尊重するか>
- <依存関係をどこで反転／抽象化する必要があるか>
- <逸脱がある場合のフォローアップや移行計画>

**ドメインロジック配置**
- <コアビジネスロジックをどこに集約するか>
- <ドメイン層をインフラ依存からどのように切り離すか>
- <集約や境界づけられたコンテキストへの影響>

**利点**
- ✅ 利点1: <具体的な利点>
- ✅ 利点2: <具体的な利点>
- ✅ 利点3: <具体的な利点>
- ✅ 利点4: <具体的な利点>（オプション）
- ✅ 利点5: <具体的な利点>（オプション）

**欠点**
- ❌ 欠点1: <具体的な制約や課題>
- ❌ 欠点2: <具体的な制約や課題>
- ❌ 欠点3: <具体的な制約や課題>
- ❌ 欠点4: <具体的な制約や課題>（オプション）
- ❌ 欠点5: <具体的な制約や課題>（オプション）

**実装複雑度**: 低 / 中 / 高

**主要リスク**
<主な技術的リスクを1-2文で説明>

---

## 設計案3: <設計案の名前>

**概要**
<この設計案について2-3文で説明>

**アーキテクチャ**
```
<主要コンポーネントとデータフローを示すシンプルな図>
```

**アーキテクチャ適合性とベストプラクティス**
- <既存アーキテクチャのレイヤー/モジュールをどのように尊重するか>
- <依存関係をどこで反転／抽象化する必要があるか>
- <逸脱がある場合のフォローアップや移行計画>

**ドメインロジック配置**
- <コアビジネスロジックをどこに集約するか>
- <ドメイン層をインフラ依存からどのように切り離すか>
- <集約や境界づけられたコンテキストへの影響>

**利点**
- ✅ 利点1: <具体的な利点>
- ✅ 利点2: <具体的な利点>
- ✅ 利点3: <具体的な利点>
- ✅ 利点4: <具体的な利点>（オプション）
- ✅ 利点5: <具体的な利点>（オプション）

**欠点**
- ❌ 欠点1: <具体的な制約や課題>
- ❌ 欠点2: <具体的な制約や課題>
- ❌ 欠点3: <具体的な制約や課題>
- ❌ 欠点4: <具体的な制約や課題>（オプション）
- ❌ 欠点5: <具体的な制約や課題>（オプション）

**実装複雑度**: 低 / 中 / 高

**主要リスク**
<主な技術的リスクを1-2文で説明>

---

## 比較表

| 評価項目 | 設計案1: <名前> | 設計案2: <名前> | 設計案3: <名前> |
|----------|---------------|---------------|---------------|
| **実装工数** | 5人日 | 8人日 | 3人日 |
| **アーキテクチャ適合度** | 高 / 中 / 低 | 高 / 中 / 低 | 高 / 中 / 低 |
| **ドメイン整合性** | 強い / 中立 / 弱い | 強い / 中立 / 弱い | 強い / 中立 / 弱い |
| **保守性** | 高 / 中 / 低 | 高 / 中 / 低 | 高 / 中 / 低 |
| **パフォーマンス** | 100ms / 高 / 良好 | 50ms / 非常に高い | 200ms / 中程度 |
| **スケーラビリティ** | 高 / 中 / 低 | 高 / 中 / 低 | 高 / 中 / 低 |
| **チームの習熟度** | 高 / 中 / 低 | 高 / 中 / 低 | 高 / 中 / 低 |
| **技術的負債** | 低 / 中 / 高 | 低 / 中 / 高 | 低 / 中 / 高 |
| **セキュリティ** | 高 / 中 / 低 | 高 / 中 / 低 | 高 / 中 / 低 |
| **コスト** | 低 / 中 / 高 | 低 / 中 / 高 | 低 / 中 / 高 |
| **運用複雑度** | 低 / 中 / 高 | 低 / 中 / 高 | 低 / 中 / 高 |

*注: プロジェクト要件に応じて評価項目を調整してください*

---

## 推奨案

### 採用する設計: 設計案<N>: <名前>

**選定理由**（3-5文）
<なぜこの設計が他の設計案より優れているかを説明>

例：
設計案1を推奨します。主な理由は以下の3点です：
1. **高い保守性**: チームメンバー全員が容易に理解・拡張できるシンプルなモジュール構成
2. **セキュリティ準拠**: OAuth2.0標準に準拠し、脆弱性リスクを最小化し規制要件を満たす
3. **既存システムとの互換性**: 現在の認証インフラとの統合が容易で、移行コストが低く中断を最小限に抑えられる

設計案2はパフォーマンスで優れていますが、実装の複雑さが高く長期的な保守コストが増大するリスクがあります。設計案3は迅速な開発に適していますが、スケーラビリティとデータ所有権の観点で要件を満たしません。

**主なトレードオフ**
<何を犠牲にし、なぜそれが許容できるかを説明 - 2-4項目>
- <アーキテクチャ原則からの逸脱がある場合は、暫定措置や改善計画を明記>

例：
- **パフォーマンス**: 設計案2と比較してレスポンスタイムが約2倍（50ms → 100ms）ですが、200msの要件を十分に満たし、ユーザー体験への影響は最小限
- **初期開発速度**: 設計案3と比較して開発期間が約2倍ですが、長期的な保守性と拡張性を優先
- **インフラの複雑さ**: トークンストレージ用の追加インフラが必要ですが、より優れたスケーラビリティとセキュリティ制御を提供

---

## 次のステップ

**ユーザーアクション:**
1. 上記の設計案と比較表を確認してください
2. 推奨案が既存アーキテクチャのガードレールに沿っているか確認してください
3. 推奨案に同意する場合は、以下のコマンドで詳細設計に進んでください：
   ```
   /sdp:design <slug>
   ```
4. 別の設計案を選択する場合は、番号を指定してください：
   ```
   /sdp:design <slug> 2
   ```
5. いずれかの設計案に修正が必要な場合は、自然言語でフィードバックを提供してください。設計案を更新します

**次に起こること:**
- `design` コマンドは、包括的な詳細設計ドキュメントを作成します
- 内容: アーキテクチャ図、データモデル、API仕様、セキュリティ対策、実装ガイドライン、ファイル構成など
- 詳細設計は選択された設計案に基づいて作成されます

---

*作成日: YYYY-MM-DD*
*設計案バージョン: 1.0*
